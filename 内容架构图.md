graph TD
    A[herbalShop Telegram Mini App] --> B{用户界面与导航};
    A --> C{产品展示与管理};
    A --> D{购物与支付};
    A --> E{用户账户与设置};
    A --> F{评论与评分};
    A --> G{Telegram SDK 集成};
    A --> H{基础设施};
    A --> I{后台管理 (CRM/CMS)};

    B --> B1[着陆页 (LandingPageFinal)];
    B --> B2[产品列表页 (ShopPage)];
    B --> B3[产品详情页 (ProductDetailsPage)];
    B --> B4[购物车页 (CartPage)];
    B --> B5[设置页 (SettingsPage)];
    B --> B6[导航组件 (Header, Footer, Modals)];

    C --> C1[产品数据模型 (Product.ts)];
    C --> C2[产品分类 (5大主类, 20+子类)];
    C --> C3[产品搜索与过滤];
    C --> C4[库存管理 (后台)];

    D --> D1[购物车上下文 (CartContext)];
    D --> D2[订单数据模型 (Order.ts)];
    D --> D3[支付集成 (Telegram Payments)];
    D --> D4[年龄验证机制];

    E --> E1[用户认证上下文 (AuthContext)];
    E --> E2[用户信息上下文 (UserContext)];
    E --> E3[用户资料编辑];
    E --> E4[订单历史];
    E --> E5[退出登录];

    F --> F1[评论提交与展示];
    F --> F2[星级评分];

    G --> G1[WebApp 用户信息获取 (UserContext)];
    G --> G2[MainButton SDK (CustomMainButton.tsx)];
    G --> G3[BackButton SDK (useTelegramBackButton)];
    G --> G4[Telegram 主题同步 (telegram-theme.css)];

    H --> H1[数据库服务 (Supabase/PostgreSQL)];
    H --> H2[图片存储 (Supabase Storage/Cloudinary)];
    H --> H3[CDN (Cloudflare)];
    H --> H4[部署 (GitHub Pages / Vite)];

    I --> I1[CRM 系统 (e.g., HubSpot via Bot)];
    I --> I2[草本知识库 (CMS/Notion-like DB)];
    I --> I3[订单管理];
    I --> I4[用户管理];
    I --> I5[内容管理];

    subgraph React Frontend (src/)
        direction LR
        B_comps[components/]
        B_pages[pages/]
        B_context[context/]
        B_services[services/]
        B_App[App.tsx]
        B_main[main.tsx]
    end

    B --> React Frontend;
    C --> React Frontend;
    D --> React Frontend;
    E --> React Frontend;
    F --> React Frontend;
    G --> React Frontend;

    React Frontend --> H1;
    React Frontend --> H2;
    React Frontend --> H3;
    React Frontend --> I1;
    React Frontend --> I2;

    classDef default fill:#f9f,stroke:#333,stroke-width:2px;
    classDef userFacing fill:#ccf,stroke:#333,stroke-width:2px;
    classDef backend fill:#cfc,stroke:#333,stroke-width:2px;
    classDef telegram fill:#cdf,stroke:#333,stroke-width:2px;

    class A,B,C,D,E,F userFacing;
    class G,G1,G2,G3,G4 telegram;
    class H,H1,H2,H3,H4,I,I1,I2,I3,I4,I5 backend;